<!DOCTYPE html>
<html>
  <head>
    <title>The Complete GGplot2 Tutorial - Part2 | Customizing the Look and Feel (with code in R)</title>
    <meta charset="utf-8">
    <meta name="Description" content="R Language Tutorials for Advanced Statistics">
    <meta name="Keywords" content="R, Tutorial, Machine learning, Statistics, Data Mining, Analytics, Data science, Linear Regression, Logistic Regression, Time series, Forecasting">
    <meta name="Distribution" content="Global">
    <meta name="Author" content="Selva Prabhakaran">
    <meta name="Robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/screenshots/iconb-64.png" type="image/x-icon" />
    <link href="www/bootstrap.min.css" rel="stylesheet">
    <link href="www/highlight.css" rel="stylesheet">

    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700'
      rel='stylesheet' type='text/css'>
    <!-- Color Script -->
    <style type="text/css">
      a {
       color: #3675C5;
       color: rgb(25, 145, 248);
       color: #4582ec;
       color: #3F73D8;
      }
      li {
        line-height: 1.65;
      }
      /* reduce spacing around math formula*/
      .MathJax_Display {
        margin: 0em 0em;
      }   
    </style>
    <!-- Add Google search -->
    <script language="Javascript" type="text/javascript">
  function my_search_google()
  {
    var query = document.getElementById("my-google-search").value;
    window.open("http://google.com/search?q=" + query
	+ "%20site:" + "http://r-statistics.co");
  }
</script>
  </head>

  <body>

    <div class="container">

      <div class="masthead">
       <!--
        <ul class="nav nav-pills pull-right">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
              Table of contents<b class="caret"></b>
            </a>
            <ul class="dropdown-menu pull-right" role="menu">
              <li class="dropdown-header"></li>
<li class="dropdown-header">Tutorial</li>
<li><a href="R-Tutorial.html">R Tutorial</a></li>
<li><a href="ggplot2-Tutorial-With-R.html">ggplot2 Tutorial</a></li>
<li><a href="ggplot2-cheatsheet.html">ggplot2 Quickref</a></li>
<li class="dropdown-header">Foundations</li>
<li><a href="Linear-Regression.html">Linear Regression</a></li>
<li><a href="Statistical-Tests-in-R.html">Statistical Tests</a></li>
<li><a href="Missing-Value-Treatment-With-R.html">Missing Value Treatment</a></li>
<li><a href="Outlier-Treatment-With-R.html">Outlier Analysis</a></li>
<li><a href="Variable-Selection-and-Importance-With-R.html">Feature Selection</a></li>
<li><a href="Model-Selection-in-R.html">Model Selection</a></li>
<li><a href="Logistic-Regression-With-R.html">Logistic Regression</a></li>
<li><a href="Environments.html">Advanced Linear Regression</a></li>

<li class="dropdown-header">Advanced Regression Models</li>
<li><a href="adv-regression-models.html">Advanced Regression Models</a></li>

<li class="dropdown-header">Time Series</li>
<li><a href="Time-Series-Analysis-With-R.html">Time Series Analysis</a></li>
<li><a href="Time-Series-Forecasting-With-R.html">Time Series Forecasting </a></li>
<li><a href="Time-Series-Forecasting-With-R-part2.html">More Time Series Forecasting</a></li>

<li class="dropdown-header">High Performance Computing</li>
<li><a href="Parallel-Computing-With-R.html">Parallel computing</a></li>
<li><a href="Strategies-To-Improve-And-Speedup-R-Code.html">Strategies to Speedup R code</a></li>

<li class="dropdown-header">Useful Techniques</li>
<li><a href="Association-Mining-With-R.html">Association Mining</a></li>
<li><a href="Multi-Dimensional-Scaling-With-R.html">Multi Dimensional Scaling</a></li>
<li><a href="Profiling.html">Optimization</a></li>
<li><a href="Information-Value-With-R.html">InformationValue package</a></li>

            </ul>
          </li>
        </ul>
        -->

        <ul class="nav nav-pills pull-right">
          <div class="input-group">
            <form onsubmit="my_search_google()">
                <input type="text" class="form-control" id="my-google-search" placeholder="Search..">
            <form>
          </div><!-- /input-group -->
        </ul><!-- /.col-lg-6 -->

        <h3 class="muted"><a href="/">r-statistics.co</a></h3>
        <hr>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-3" id="nav">
        <div class="well">
          <li>
            <ul class="list-unstyled">
                <li class="dropdown-header"></li>
<li class="dropdown-header">Tutorial</li>
<li><a href="R-Tutorial.html">R Tutorial</a></li>
<li><a href="ggplot2-Tutorial-With-R.html">ggplot2 Tutorial</a></li>
<li><a href="ggplot2-cheatsheet.html">ggplot2 Quickref</a></li>
<li class="dropdown-header">Foundations</li>
<li><a href="Linear-Regression.html">Linear Regression</a></li>
<li><a href="Statistical-Tests-in-R.html">Statistical Tests</a></li>
<li><a href="Missing-Value-Treatment-With-R.html">Missing Value Treatment</a></li>
<li><a href="Outlier-Treatment-With-R.html">Outlier Analysis</a></li>
<li><a href="Variable-Selection-and-Importance-With-R.html">Feature Selection</a></li>
<li><a href="Model-Selection-in-R.html">Model Selection</a></li>
<li><a href="Logistic-Regression-With-R.html">Logistic Regression</a></li>
<li><a href="Environments.html">Advanced Linear Regression</a></li>

<li class="dropdown-header">Advanced Regression Models</li>
<li><a href="adv-regression-models.html">Advanced Regression Models</a></li>

<li class="dropdown-header">Time Series</li>
<li><a href="Time-Series-Analysis-With-R.html">Time Series Analysis</a></li>
<li><a href="Time-Series-Forecasting-With-R.html">Time Series Forecasting </a></li>
<li><a href="Time-Series-Forecasting-With-R-part2.html">More Time Series Forecasting</a></li>

<li class="dropdown-header">High Performance Computing</li>
<li><a href="Parallel-Computing-With-R.html">Parallel computing</a></li>
<li><a href="Strategies-To-Improve-And-Speedup-R-Code.html">Strategies to Speedup R code</a></li>

<li class="dropdown-header">Useful Techniques</li>
<li><a href="Association-Mining-With-R.html">Association Mining</a></li>
<li><a href="Multi-Dimensional-Scaling-With-R.html">Multi Dimensional Scaling</a></li>
<li><a href="Profiling.html">Optimization</a></li>
<li><a href="Information-Value-With-R.html">InformationValue package</a></li>

            </ul>
          </li>
        </div>

        <div class="well">
          <p>Stay up-to-date. <a href="https://docs.google.com/forms/d/1xkMYkLNFU9U39Dd8S_2JC0p8B5t6_Yq6zUQjanQQJpY/viewform">Subscribe!</a></p>
          <p><a href="https://docs.google.com/forms/d/13GrkCFcNa-TOIllQghsz2SIEbc-YqY9eJX02B19l5Ow/viewform">Chat!</a></p>
        </div>

        
        <h4>Contents</h4>
        

          <ul class="list-unstyled" id="toc"></ul>
        <!--
          <hr>
          <p><a href="/contribute.html">How to contribute</a></p>

          <p><a class="btn btn-primary" href="">Edit this page</a></p>
        -->  
        </div>

        <div id="content" class="col-xs-12 col-sm-8 pull-right">

          <h2>Ggplot Tutorial - Part 2: Customizing the Look and Feel</h2>
<p>This is part 2 of a three part tutorial on ggplot2, an aesthetically pleasing (and very popular) graphics framework in R. This tutorial is primarily geared towards those having some basic knowledge of the R programming language and want to make complex and nice looking charts with R ggplot.</p>
<ul>
<li><p><a href="ggplot2-r-Tutorial-Part1.html">Part 1: Introduction to Ggplot</a>, covers the basic knowledge about constructing simple ggplots and modifying the components and aesthetics.</p></li>
<li><p><a href="ggplot2-r-Tutorial-Part2.html">Part 2: Customizing the Look and Feel</a>, is about more advanced customizations related to styling the plot elements (like legend, annotations, multiplots with faceting and custom layout, etc) and manipulating the output.</p></li>
<li><p><a href="ggplot2-r-Tutorial-Part3.html">Part 3: Top 50 Ggplot2 Visualizations - The Master List</a>, applies what we learnt in part 1 and 2 to construct other types of ggplots such as bar charts, boxplots etc.</p></li>
</ul>
<h3>Part 2: Customizing the look and feel</h3>
<p>In this tutorial, I will cover how to modify and customize the looks of:</p>
<ol style="list-style-type: decimal">
<li><a href="ggplot2-r-Tutorial-Part2.html#1.%20Plot%20and%20Axis%20Titles">Plot and Axis Titles</a></li>
<li><a href="ggplot2-r-Tutorial-Part2.html#2.%20Modifying%20Legend">Modifying Legend</a></li>
<li><a href="ggplot2-r-Tutorial-Part2.html#3.%20Text,%20Label%20and%20Annotation">Text, Label and Annotation</a></li>
<li><a href="ggplot2-r-Tutorial-Part2.html#4.%20Flipping%20and%20Reversing%20X%20and%20Y%20Axis">Flipping and Reversing X and Y Axis</a></li>
<li><a href="ggplot2-r-Tutorial-Part2.html#5.%20Faceting:%20Draw%20multiple%20plots%20within%20one%20figure">Faceting: Draw multiple plots within one figure</a></li>
<li><a href="ggplot2-r-Tutorial-Part2.html#6.%20Plot%20Background,%20Major%20and%20Minor%20Axis">Plot Background, Major and Minor Axis</a></li>
</ol>
<p>Let’s begin with a scatterplot of Population against Area where the point’s color and size vary based on state (categorial) and <code>popdensity</code> (continuous) respectively.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Setup</span>
<span class="kw">options</span>(<span class="dt">scipen=</span><span class="dv">999</span>)
<span class="kw">library</span>(ggplot2)
<span class="kw">data</span>(<span class="st">&quot;midwest&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;ggplot2&quot;</span>)
<span class="kw">theme_set</span>(<span class="kw">theme_bw</span>())
<span class="co"># midwest &lt;- read.csv(&quot;http://goo.gl/G1K41K&quot;)  # bkup data source</span>

<span class="co"># Add plot components --------------------------------</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

<span class="co"># Call plot ------------------------------------------</span>
<span class="kw">plot</span>(gg)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_1.png" alt="A full featured ggplot" /></p>
<p>Let’s discuss a number of tasks related to changing the plot output, starting with modifying the legend.</p>
<h2>1. Plot and Axis Titles</h2>
<p>The aesthetics of components such as plot and axis titles and the axis text can also be customized. Since they are part of the plot’s theme, it has to be passed to the <code>theme()</code> function and the values need to be set using the <code>element_text()</code> function.</p>
<p>The arguments passed to <code>theme()</code> components require to be set using special <code>element_type()</code> functions. They are of 4 major types.</p>
<ol style="list-style-type: decimal">
<li><code>element_text()</code>: Since the title, subtitle and captions are textual items, <code>element_text()</code> function is used to set it.</li>
<li><code>element_line()</code>: Likewise <code>element_line()</code> is use to modify line based components such as [axis line, major and minor grid lines](Plot Background, Major and Minor Axis](ggplot2-r-Tutorial-Part2.html#6. Plot Background, Major and Minor Axis)</li>
<li><code>element_rect()</code>: Modifies rectangle components such as <a href="ggplot2-r-Tutorial-Part2.html#6.%20Plot%20Background,%20Major%20and%20Minor%20Axis">plot and panel background</a></li>
<li><code>element_blank()</code>: Turns off displaying the theme item.</li>
</ol>
<p>Below, I have changed the size, color, face and line-height. The axis text can be tilted by changing the <code>angle</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

<span class="co"># Modify theme components -------------------------------------------</span>
gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">plot.title=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">20</span>, 
                                    <span class="dt">face=</span><span class="st">&quot;bold&quot;</span>, 
                                    <span class="dt">family=</span><span class="st">&quot;American Typewriter&quot;</span>,
                                    <span class="dt">color=</span><span class="st">&quot;tomato&quot;</span>,
                                    <span class="dt">hjust=</span><span class="fl">0.5</span>,
                                    <span class="dt">lineheight=</span><span class="fl">1.2</span>),  <span class="co"># title</span>
            <span class="dt">plot.subtitle=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">15</span>, 
                                       <span class="dt">family=</span><span class="st">&quot;American Typewriter&quot;</span>,
                                       <span class="dt">face=</span><span class="st">&quot;bold&quot;</span>,
                                       <span class="dt">hjust=</span><span class="fl">0.5</span>),  <span class="co"># subtitle</span>
            <span class="dt">plot.caption=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">15</span>),  <span class="co"># caption</span>
            <span class="dt">axis.title.x=</span><span class="kw">element_text</span>(<span class="dt">vjust=</span><span class="dv">10</span>,  
                                      <span class="dt">size=</span><span class="dv">15</span>),  <span class="co"># X axis title</span>
            <span class="dt">axis.title.y=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">15</span>),  <span class="co"># Y axis title</span>
            <span class="dt">axis.text.x=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>, 
                                     <span class="dt">angle =</span> <span class="dv">30</span>,
                                     <span class="dt">vjust=</span>.<span class="dv">5</span>),  <span class="co"># X axis text</span>
            <span class="dt">axis.text.y=</span><span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>))  <span class="co"># Y axis text</span></code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_2.png" alt="Customize Ggplot Theme" /></p>
<ul>
<li><code>vjust</code>, controls the vertical spacing between title (or label) and plot.</li>
<li><code>hjust</code>, controls the horizontal spacing. Setting it to 0.5 centers the title.</li>
<li><code>family</code>, is used to set a new font</li>
<li><code>face</code>, sets the font face (“plain”, “italic”, “bold”, “bold.italic”)</li>
</ul>
<p>Above example covers some of the frequently used theme modifications and the actual list is too long. So <code>?theme</code> is the first place you want to look at if you want to change the look and feel of any component.</p>
<h2>2. Modifying Legend</h2>
<h3>Legend Title</h3>
<p>Let’s begin with changing the legend title. We have two legends, one each for color and size. The size is based on a continuous variable while the color is based on a categorical(discrete).</p>
<p>There are 3 ways to change the legend title.</p>
<h4>Method 1: Using <code>labs()</code></h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

gg +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">color=</span><span class="st">&quot;State&quot;</span>, <span class="dt">size=</span><span class="st">&quot;Density&quot;</span>)  <span class="co"># modify legend title</span></code></pre></div>
<p><br></p>
<h4>Method 2: Using <code>guides()</code></h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

gg &lt;-<span class="st"> </span>gg +<span class="st"> </span><span class="kw">guides</span>(<span class="dt">color=</span><span class="kw">guide_legend</span>(<span class="st">&quot;State&quot;</span>), <span class="dt">size=</span><span class="kw">guide_legend</span>(<span class="st">&quot;Density&quot;</span>))  <span class="co"># modify legend title</span>
<span class="kw">plot</span>(gg)</code></pre></div>
<p><br></p>
<h4>Method 3: Using <code>scale_aesthetic_vartype()</code> format</h4>
<p>The format of <code>scale_aestheic_vartype()</code> (like <code>scale_size_continuous()</code>) allows you to turn off legend for one particular aesthetic, leaving the rest in place. This can be done just by setting <code>guide=FALSE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

<span class="co"># Modify Legend</span>
gg +<span class="st"> </span><span class="kw">scale_color_discrete</span>(<span class="dt">name=</span><span class="st">&quot;State&quot;</span>) +<span class="st"> </span><span class="kw">scale_size_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Density&quot;</span>, <span class="dt">guide =</span> <span class="ot">FALSE</span>)  <span class="co"># turn off legend for size</span></code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_3.png" alt="Change Ggplot2 Legend Title" /></p>
<h3>How to Change Legend Labels and Point Colors for Categories</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

gg +<span class="st"> </span><span class="kw">scale_color_manual</span>(<span class="dt">name=</span><span class="st">&quot;State&quot;</span>, 
                        <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Illinois&quot;</span>, 
                                   <span class="st">&quot;Indiana&quot;</span>, 
                                   <span class="st">&quot;Michigan&quot;</span>, 
                                   <span class="st">&quot;Ohio&quot;</span>, 
                                   <span class="st">&quot;Wisconsin&quot;</span>), 
                        <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;IL&quot;</span>=<span class="st">&quot;blue&quot;</span>, 
                                   <span class="st">&quot;IN&quot;</span>=<span class="st">&quot;red&quot;</span>, 
                                   <span class="st">&quot;MI&quot;</span>=<span class="st">&quot;green&quot;</span>, 
                                   <span class="st">&quot;OH&quot;</span>=<span class="st">&quot;brown&quot;</span>, 
                                   <span class="st">&quot;WI&quot;</span>=<span class="st">&quot;orange&quot;</span>))</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_4.png" alt="Change Ggplot2 Legend Label and Point Color" /></p>
<h3>Change the Order of Legend</h3>
<p>In case you want to show the legend for color (<code>State</code>) before size (<code>Density</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

gg +<span class="st"> </span><span class="kw">guides</span>(<span class="dt">colour =</span> <span class="kw">guide_legend</span>(<span class="dt">order =</span> <span class="dv">1</span>),
            <span class="dt">size =</span> <span class="kw">guide_legend</span>(<span class="dt">order =</span> <span class="dv">2</span>))</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_5.png" alt="Change the Order of Legend in Ggplot2" /></p>
<h3>How to Style the Legend Title, Text and Key</h3>
<p>The styling of legend title, text, key and the guide can also be adjusted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;firebrick&quot;</span>), 
           <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">10</span>),
           <span class="dt">legend.key=</span><span class="kw">element_rect</span>(<span class="dt">fill=</span><span class="st">&#39;springgreen&#39;</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">guides</span>(<span class="dt">colour =</span> <span class="kw">guide_legend</span>(<span class="dt">override.aes =</span> <span class="kw">list</span>(<span class="dt">size=</span><span class="dv">2</span>, <span class="dt">stroke=</span><span class="fl">1.5</span>))) </code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_6.png" alt="Style the Legend Title, Text and Key in Ggplot2" /></p>
<h3>Legend Positions</h3>
<p>The legend’s position inside the plot is an aspect of the theme. So it can be modified using the <code>theme()</code> function. If you want to place the legend inside the plot, you can additionally control the hinge point of the legend using <code>legend.justification</code>.</p>
<p>The <code>legend.position</code> is the x and y axis position in chart area, where <code>(0,0)</code> is bottom left of the chart and <code>(1,1)</code> is top right. Likewise, <code>legend.justification</code> refers to the hinge point inside the legend.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

<span class="co"># No legend --------------------------------------------------</span>
gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;None&quot;</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;No Legend&quot;</span>)

<span class="co"># Legend to the left -----------------------------------------</span>
gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;left&quot;</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;Legend on the Left&quot;</span>)

<span class="co"># legend at the bottom and horizontal ------------------------</span>
gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position=</span><span class="st">&quot;bottom&quot;</span>, <span class="dt">legend.box =</span> <span class="st">&quot;horizontal&quot;</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;Legend at Bottom&quot;</span>)

<span class="co"># legend at bottom-right, inside the plot --------------------</span>
gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;salmon&quot;</span>, <span class="dt">face=</span><span class="st">&quot;bold&quot;</span>),
           <span class="dt">legend.justification=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), 
           <span class="dt">legend.position=</span><span class="kw">c</span>(<span class="fl">0.95</span>, <span class="fl">0.05</span>),  
           <span class="dt">legend.background =</span> <span class="kw">element_blank</span>(),
           <span class="dt">legend.key =</span> <span class="kw">element_blank</span>()) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;Legend: Bottom-Right Inside the Plot&quot;</span>)

<span class="co"># legend at top-left, inside the plot -------------------------</span>
gg +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.title =</span> <span class="kw">element_text</span>(<span class="dt">size=</span><span class="dv">12</span>, <span class="dt">color =</span> <span class="st">&quot;salmon&quot;</span>, <span class="dt">face=</span><span class="st">&quot;bold&quot;</span>),
           <span class="dt">legend.justification=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), 
           <span class="dt">legend.position=</span><span class="kw">c</span>(<span class="fl">0.05</span>, <span class="fl">0.95</span>),
           <span class="dt">legend.background =</span> <span class="kw">element_blank</span>(),
           <span class="dt">legend.key =</span> <span class="kw">element_blank</span>()) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;Legend: Top-Left Inside the Plot&quot;</span>)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_7.png" alt="Ggplot2 With No Legend" /> <img src="screenshots/ggplot_tutorial_customize_theme_8.png" alt="Ggplot2 - Legend on the Left" /> <img src="screenshots/ggplot_tutorial_customize_theme_9.png" alt="Ggplot2 - Legend at Bottom" /> <img src="screenshots/ggplot_tutorial_customize_theme_10.png" alt="Ggplot2 - Legend Inside the Plot - Bottom-right" /> <img src="screenshots/ggplot_tutorial_customize_theme_11.png" alt="Ggplot2 - Legend Inside the Plot - Top-Left" /></p>
<h2>3. Text, Label and Annotation</h2>
<h3>Text and Label around the points</h3>
<p>Let’s try adding some text. We will add text to those counties with population greater than 400K. In order to achieve this, I create another dataframe (<code>midwest_sub</code>) that contains only the counties that qualifies the said condition. Then, draw the <code>geom_text</code> and <code>geom_label</code> with this new dataframe as the <code>data</code> source. This will ensure that labels (<code>geom_label</code>) are added only for the points contained in the new dataframe.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Filter required rows.</span>
midwest_sub &lt;-<span class="st"> </span>midwest[midwest$poptotal &gt;<span class="st"> </span><span class="dv">300000</span>, ]
midwest_sub$large_county &lt;-<span class="st"> </span><span class="kw">ifelse</span>(midwest_sub$poptotal &gt;<span class="st"> </span><span class="dv">300000</span>, midwest_sub$county, <span class="st">&quot;&quot;</span>)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

<span class="co"># Plot text and label ------------------------------------------------------</span>
gg +<span class="st"> </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span>large_county), <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">data=</span>midwest_sub) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;With ggplot2::geom_text&quot;</span>) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;None&quot;</span>)   <span class="co"># text</span>

gg +<span class="st"> </span><span class="kw">geom_label</span>(<span class="kw">aes</span>(<span class="dt">label=</span>large_county), <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">data=</span>midwest_sub, <span class="dt">alpha=</span><span class="fl">0.25</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;With ggplot2::geom_label&quot;</span>) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;None&quot;</span>)  <span class="co"># label</span>

<span class="co"># Plot text and label that REPELS eachother (using ggrepel pkg) ------------</span>
<span class="kw">library</span>(ggrepel)
gg +<span class="st"> </span><span class="kw">geom_text_repel</span>(<span class="kw">aes</span>(<span class="dt">label=</span>large_county), <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">data=</span>midwest_sub) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;With ggrepel::geom_text_repel&quot;</span>) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;None&quot;</span>)   <span class="co"># text</span>

gg +<span class="st"> </span><span class="kw">geom_label_repel</span>(<span class="kw">aes</span>(<span class="dt">label=</span>large_county), <span class="dt">size=</span><span class="dv">2</span>, <span class="dt">data=</span>midwest_sub) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">subtitle=</span><span class="st">&quot;With ggrepel::geom_label_repel&quot;</span>) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;None&quot;</span>)   <span class="co"># label</span></code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_14.png" alt="Ggplot2 - Repelling Text with ggrepel" /> <img src="screenshots/ggplot_tutorial_customize_theme_15.png" alt="Ggplot2 - Repelling Text Labels with ggrepel" /></p>
<p>Since the label is looked up from a different dataframe, we need to set the data argument.</p>
<h3>Annotation</h3>
<p>Let’s see how to add annotation to any specific point of the chart. It can be done with the <code>annotation_custom()</code> function which takes in a <code>grob</code> as the argument. So, let’s create a grob the holds the text you want to display using the <code>grid</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>)

<span class="co"># Define and add annotation -------------------------------------</span>
<span class="kw">library</span>(grid)
my_text &lt;-<span class="st"> &quot;This text is at x=0.7 and y=0.8!&quot;</span>
my_grob =<span class="st"> </span><span class="kw">grid.text</span>(my_text, <span class="dt">x=</span><span class="fl">0.7</span>,  <span class="dt">y=</span><span class="fl">0.8</span>, <span class="dt">gp=</span><span class="kw">gpar</span>(<span class="dt">col=</span><span class="st">&quot;firebrick&quot;</span>, <span class="dt">fontsize=</span><span class="dv">14</span>, <span class="dt">fontface=</span><span class="st">&quot;bold&quot;</span>))
gg +<span class="st"> </span><span class="kw">annotation_custom</span>(my_grob)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_16.png" alt="Ggplot2 - Text Annotations" /></p>
<h2>4. Flipping and Reversing X and Y Axis</h2>
<h3>How to flip the X and Y axis?</h3>
<p>Just add <code>coord_flip()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;X and Y axis Flipped&quot;</span>) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;None&quot;</span>)

<span class="co"># Flip the X and Y axis -------------------------------------------------</span>
gg +<span class="st"> </span><span class="kw">coord_flip</span>()</code></pre></div>
<h3>How to reverse the scale of an axis?</h3>
<p>This is quite simple. Use <code>scale_x_reverse()</code> for X axis and <code>scale_y_reverse()</code> for Y axis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
gg &lt;-<span class="st"> </span><span class="kw">ggplot</span>(midwest, <span class="kw">aes</span>(<span class="dt">x=</span>area, <span class="dt">y=</span>poptotal)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">col=</span>state, <span class="dt">size=</span>popdensity)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;loess&quot;</span>, <span class="dt">se=</span>F) +<span class="st"> </span><span class="kw">xlim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">0.1</span>)) +<span class="st"> </span><span class="kw">ylim</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">500000</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Area Vs Population&quot;</span>, <span class="dt">y=</span><span class="st">&quot;Population&quot;</span>, <span class="dt">x=</span><span class="st">&quot;Area&quot;</span>, <span class="dt">caption=</span><span class="st">&quot;Source: midwest&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Axis Scales Reversed&quot;</span>) +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;None&quot;</span>)

<span class="co"># Reverse the X and Y Axis ---------------------------</span>
gg +<span class="st"> </span><span class="kw">scale_x_reverse</span>() +<span class="st"> </span><span class="kw">scale_y_reverse</span>()</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_17.png" alt="Ggplot2 - How to flip X and Y Axis" /> <img src="screenshots/ggplot_tutorial_customize_theme_18.png" alt="Ggplot2 - How to reverse X and Y axis scales" /></p>
<h2>5. Faceting: Draw multiple plots within one figure</h2>
<p>Let’s use a the <code>mpg</code> dataset for this one. It is available in the ggplot2 package, or you can read it from this link.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">data</span>(mpg, <span class="dt">package=</span><span class="st">&quot;ggplot2&quot;</span>)  <span class="co"># load data</span>
<span class="co"># mpg &lt;- read.csv(&quot;http://goo.gl/uEeRGu&quot;)  # alt data source</span>

g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;hwy vs displ&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>) +
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>
<span class="kw">plot</span>(g)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_19.png" alt="Ggplot2 - Basic Plot" /></p>
<p>We have a simple chart of highway mileage <code>(hwy)</code> against the engine displacement <code>(displ)</code> for the whole dataset. But what if you want to study how this relationship varies for different classes of vehicles?</p>
<p>The <code>facet_wrap()</code> does just that. By default, all the plots share the same scale in both X and Y axis. You can set them free by setting <code>scales='free'</code> but this way it could be harder to compare the groups.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>

<span class="co"># Facet wrap with common scales</span>
g +<span class="st"> </span><span class="kw">facet_wrap</span>( ~<span class="st"> </span>class, <span class="dt">nrow=</span><span class="dv">3</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;hwy vs displ&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Ggplot2 - Faceting - Multiple plots in one figure&quot;</span>)  <span class="co"># Shared scales</span>

<span class="co"># Facet wrap with free scales</span>
g +<span class="st"> </span><span class="kw">facet_wrap</span>( ~<span class="st"> </span>class, <span class="dt">scales =</span> <span class="st">&quot;free&quot;</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;hwy vs displ&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Ggplot2 - Faceting - Multiple plots in one figure with free scales&quot;</span>)  <span class="co"># Scales free</span></code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_20.png" alt="Ggplot2 - Faceting - Multiple plots in one figure" /> <img src="screenshots/ggplot_tutorial_customize_theme_21.png" alt="Ggplot2 - Faceting - Multiple plots in one figure with free scales" /></p>
<p>So, What do you infer from this? For one, most 2 seater cars have higher engine displacement while the minivan and compact vehicles are on the lower side. This is evident from where the points are placed along the X-axis.</p>
<p>Also, the highway mileage drops across all segments as the engine displacement increases. This drop seems more pronounced in compact and subcompact vehicles.</p>
<p>The headings of the middle and bottom rows take up significant space. The <code>facet_grid()</code> would get rid of it and give more area to the charts. The main difference with <code>facet_grid</code> is that it is not possible to choose the number of rows and columns in the grid.</p>
<p>Alright, Let’s create a grid to see how it varies with manufacturer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;hwy vs displ&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Ggplot2 - Faceting - Multiple plots in one figure&quot;</span>) +
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>

<span class="co"># Add Facet Grid</span>
g1 &lt;-<span class="st"> </span>g +<span class="st"> </span><span class="kw">facet_grid</span>(manufacturer ~<span class="st"> </span>class)  <span class="co"># manufacturer in rows and class in columns</span>
<span class="kw">plot</span>(g1)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_22.png" alt="Ggplot2 - Facet Grid - Multiple plots in one figure" /></p>
<p>Let’s make one more to vary by cylinder.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;hwy vs displ&quot;</span>, <span class="dt">caption =</span> <span class="st">&quot;Source: mpg&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;Ggplot2 - Facet Grid - Multiple plots in one figure&quot;</span>) +
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>

<span class="co"># Add Facet Grid</span>
g2 &lt;-<span class="st"> </span>g +<span class="st"> </span><span class="kw">facet_grid</span>(cyl ~<span class="st"> </span>class)  <span class="co"># cyl in rows and class in columns.</span>
<span class="kw">plot</span>(g2)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_23.png" alt="Ggplot2 - Facet Grid - Multiple plots in one figure" /></p>
<p>Great!. It is possible to layout both these charts in the sample panel. I prefer the <code>gridExtra()</code> package for this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Draw Multiple plots in same figure.</span>
<span class="kw">library</span>(gridExtra)
gridExtra::<span class="kw">grid.arrange</span>(g1, g2, <span class="dt">ncol=</span><span class="dv">2</span>)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_24.png" alt="Ggplot2 - Custom Layouts" /></p>
<h2>6. Plot Background, Major and Minor Axis</h2>
<h3>Change Plot background</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>

<span class="co"># Change Plot Background elements -----------------------------------</span>
g +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&#39;khaki&#39;</span>),
          <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;burlywood&quot;</span>, <span class="dt">size=</span><span class="fl">1.5</span>),
          <span class="dt">panel.grid.minor =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;tomato&quot;</span>, <span class="dt">size=</span>.<span class="dv">25</span>, <span class="dt">linetype =</span> <span class="st">&quot;dashed&quot;</span>),
          <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),
          <span class="dt">axis.line.x =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;darkorange&quot;</span>, <span class="dt">size=</span><span class="fl">1.5</span>, <span class="dt">lineend =</span> <span class="st">&quot;butt&quot;</span>),
          <span class="dt">axis.line.y =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;darkorange&quot;</span>, <span class="dt">size=</span><span class="fl">1.5</span>)) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Modified Background&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;How to Change Major and Minor grid, Axis Lines, No Border&quot;</span>)

<span class="co"># Change Plot Margins -----------------------------------------------</span>
g +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">plot.background=</span><span class="kw">element_rect</span>(<span class="dt">fill=</span><span class="st">&quot;salmon&quot;</span>), 
          <span class="dt">plot.margin =</span> <span class="kw">unit</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="st">&quot;cm&quot;</span>)) +<span class="st">  </span><span class="co"># top, right, bottom, left</span>
<span class="st">    </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Modified Background&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;How to Change Plot Margin&quot;</span>)  </code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_25.png" alt="Ggplot2 - How to change plot background" /> <img src="screenshots/ggplot_tutorial_customize_theme_26.png" alt="Ggplot2 - How to change plot margin" /></p>
<h3>Removing major and minor grid, border, axis title, text and ticks</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)

<span class="co"># Base Plot</span>
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>

g +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(), 
          <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), 
          <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),
          <span class="dt">axis.title =</span> <span class="kw">element_blank</span>(), 
          <span class="dt">axis.text =</span> <span class="kw">element_blank</span>(),
          <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>()) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&quot;Modified Background&quot;</span>, <span class="dt">subtitle=</span><span class="st">&quot;How to remove major and minor axis grid, border, axis title, text and ticks&quot;</span>) </code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_27.png" alt="Ggplot2 - How to remove major and minor axis grid, border, axis title, text and ticks" /></p>
<h3>Add an image in background</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(grid)
<span class="kw">library</span>(png)

img &lt;-<span class="st"> </span>png::<span class="kw">readPNG</span>(<span class="st">&quot;screenshots/Rlogo.png&quot;</span>)  <span class="co"># source: https://www.r-project.org/</span>
g_pic &lt;-<span class="st"> </span><span class="kw">rasterGrob</span>(img, <span class="dt">interpolate=</span><span class="ot">TRUE</span>)

<span class="co"># Base Plot</span>
g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x=</span>displ, <span class="dt">y=</span>hwy)) +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_point</span>() +<span class="st"> </span>
<span class="st">      </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>, <span class="dt">se=</span><span class="ot">FALSE</span>) +<span class="st"> </span>
<span class="st">      </span><span class="kw">theme_bw</span>()  <span class="co"># apply bw theme</span>

g +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(), 
          <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(), 
          <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="kw">rel</span>(<span class="fl">1.5</span>), <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),
          <span class="dt">axis.ticks =</span> <span class="kw">element_blank</span>()) +<span class="st"> </span>
<span class="st">  </span><span class="kw">annotation_custom</span>(g_pic, <span class="dt">xmin=</span><span class="dv">5</span>, <span class="dt">xmax=</span><span class="dv">7</span>, <span class="dt">ymin=</span><span class="dv">30</span>, <span class="dt">ymax=</span><span class="dv">45</span>)</code></pre></div>
<p><img src="screenshots/ggplot_tutorial_customize_theme_28.png" alt="Ggplot2 - Add an image in background" /></p>
<h3>Inheritance Structure of Theme Components</h3>
<p><img src="screenshots/ggplot_tutorial_customize_theme_29.png" alt="Ggplot2 - Inheritance Structure of Ggplot theme components" /> <em>source: <a href="http://docs.ggplot2.org/dev/vignettes/themes.html_" class="uri">http://docs.ggplot2.org/dev/vignettes/themes.html_</a> </em>__________________________________________________</p>
<p>Have a suggestion or found a bug? Notify <a href="https://docs.google.com/forms/d/e/1FAIpQLSeIJmlvwe562R7JVpi5J2ydLyhk5-7OrGRMFGYrMJvjPal8eA/viewform">here.</a></p>
<p><em><strong>Editors Note:</strong> The <a href="packtpub.com/big-data-and-business-intelligence/mastering-r-programming-video">mastering R programming</a> video course has a dedicated section for ggplot2 where the concepts are demonstrated in detail. Additionally it includes solving real coding challenges at the end of every video lesson.</em></p>


        </div>
      </div>

      <div class="footer">
        <hr>
        <p>&copy; 2016-17 Selva Prabhakaran. Powered by <a href="http://jekyllrb.com/">jekyll</a>,
          <a href="http://yihui.name/knitr/">knitr</a>, and
          <a href="http://johnmacfarlane.net/pandoc/">pandoc</a>.
          This work is licensed under the <a href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons License.</a>
        </p>
      </div>

    </div> <!-- /container -->

  <script src="//code.jquery.com/jquery.js"></script>
  <script src="www/bootstrap.min.js"></script>
  <script src="www/toc.js"></script>
  <!-- MathJax Script -->
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
    });
  </script>
  <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  
  <!-- Google Analytics Code -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-69351797-1', 'auto');
    ga('send', 'pageview');
  </script>

  <style type="text/css">
  /* reduce spacing around math formula*/
    .MathJax_Display {
      margin: 0em 0em;
    }
    body {
      font-family: 'Helvetica Neue', Roboto, Arial, sans-serif;
      font-size: 16px;
      line-height: 27px;
      font-weight: 400;
    }

    blockquote p {
      line-height: 1.75;
      color: #717171;
    }

    .well li{
      line-height: 28px;
    }

    li.dropdown-header {
      display: block;
      padding: 0px;
      font-size: 14px;
    }
  </style>
  </body>
</html>